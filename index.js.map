{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '50339629-b1274d664611d8807e14b18d5';\n\nexport async function getImagesByQuery(query, page = 1) {\n    const params = {\n      key: API_KEY,\n      q: query,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      page,\n      per_page: 15,\n    };\n  \n    try {\n      const response = await axios.get(BASE_URL, { params });\n      return response.data;\n    } catch (error) {\n      console.error('Помилка запиту до Pixabay API:', error);\n      throw error;\n    }\n  }","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst galleryContainer = document.querySelector('.gallery');\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n  });\n\nexport function createGallery(images) {\n    const markup = images.map(image => {\n      return `\n        <li class=\"gallery-item\">\n        <a class=\"gallery-link\" href=\"${image.largeImageURL}\" title=\"${image.tags}\">\n  <img\n    class=\"gallery-image\"\n    src=\"${image.webformatURL}\"\n   alt=\"${image.tags.split(',').slice(0, 3).map(tag => tag.trim()).join(', ')}\"\n  />\n</a>\n          <div class=\"info\">\n            <p class=\"info-item\">\n              <b>Likes:</b> ${image.likes}\n            </p>\n            <p class=\"info-item\">\n              <b>Views:</b> ${image.views}\n            </p>\n            <p class=\"info-item\">\n              <b>Comments:</b> ${image.comments}\n            </p>\n            <p class=\"info-item\">\n              <b>Downloads:</b> ${image.downloads}\n            </p>\n          </div>\n        </li>\n      `;\n    }).join('');\n  \n    galleryContainer.insertAdjacentHTML('beforeend', markup);\n    lightbox.refresh();\n  }\n\nexport function clearGallery() {\n    galleryContainer.innerHTML = '';\n}\n  \nexport function showLoader() {\n    document.body.classList.add('loading');\n  }\n  \n  export function hideLoader() {\n    document.body.classList.remove('loading');\n  }\n\nexport function showLoadMoreButton() {\n    document.querySelector('.load-more').classList.remove('hidden');\n}\n\nexport function hideLoadMoreButton() {\n    document.querySelector('.load-more').classList.add('hidden');\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport { getImagesByQuery } from './js/pixabay-api.js';\nimport { createGallery, clearGallery, showLoader, hideLoader, showLoadMoreButton, hideLoadMoreButton } from './js/render-functions.js';\n\nconst form = document.querySelector('.form');\nconst input = form.elements['search-text'];\nconst loadMoreBtn = document.querySelector('.load-more');\nlet currentPage = 1;\nlet currentQuery = '';\n\nform.addEventListener('submit', onFormSubmit);\nloadMoreBtn.addEventListener('click', onLoadMore);\n\nasync function onFormSubmit(event) {\n    event.preventDefault();\n  \n    const query = input.value.trim();\n  \n    if (query === '') {\n      iziToast.warning({\n        message: 'Please enter a search query!',\n        position: 'topRight',\n      });\n      return;\n    }\n  \n    clearGallery();\n    hideLoadMoreButton();\n    showLoader();\n    currentPage = 1;\n    currentQuery = query;\n\n    try {\n      const data = await getImagesByQuery(query, currentPage);\n  \n      if (data.hits.length === 0) {\n        iziToast.error({\n          message: 'Sorry, there are no images matching your search query. Please try again!',\n          position: 'topRight',\n        });\n        return;\n      }\n  \n      createGallery(data.hits);\n      const totalPages = Math.ceil(data.totalHits / 15);\n      if (currentPage < totalPages) {\n        showLoadMoreButton();\n      } else {\n        hideLoadMoreButton();\n      }\n    } catch (error) {\n      iziToast.error({\n        message: 'An error occurred while fetching images!',\n          position: 'topRight',\n        \n      });\n    } finally {\n      hideLoader();\n      input.value = '';\n    }\n}\n\nasync function onLoadMore() {\n  showLoader();\n  currentPage += 1;\n\n  try {\n    const data = await getImagesByQuery(currentQuery, currentPage);\n\n    if (data.hits.length === 0) {\n      iziToast.info({\n        message: 'No more images to load.',\n        position: 'topRight',\n      });\n      hideLoadMoreButton();\n      return;\n    }\n\n    createGallery(data.hits);\n    if (data.hits.length < 15) {\n      hideLoadMoreButton();\n    }\n    const totalPages = Math.ceil(data.totalHits / 15);\n    if (currentPage >= totalPages) {\n      hideLoadMoreButton();\n      iziToast.info({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n      });\n    }\n    // Smooth scroll after new images are loaded\n    setTimeout(() => {\n      const gallery = document.querySelector('.gallery');\n      if (gallery && gallery.firstElementChild) {\n        const { height: cardHeight } = gallery.firstElementChild.getBoundingClientRect();\n        window.scrollBy({\n          top: cardHeight * 2,\n          behavior: 'smooth',\n        });\n      }\n    }, 100);\n  } catch (error) {\n    iziToast.error({\n      message: 'An error occurred while fetching images!',\n      position: 'topRight',\n    });\n  } finally {\n    hideLoader();\n  }\n}\n"],"names":["BASE_URL","API_KEY","getImagesByQuery","query","page","params","axios","error","galleryContainer","lightbox","SimpleLightbox","createGallery","images","markup","image","tag","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","form","input","loadMoreBtn","currentPage","currentQuery","onFormSubmit","onLoadMore","event","iziToast","data","totalPages","gallery","cardHeight"],"mappings":"owBAEA,MAAMA,EAAW,2BACXC,EAAU,qCAET,eAAeC,EAAiBC,EAAOC,EAAO,EAAG,CACpD,MAAMC,EAAS,CACb,IAAKJ,EACL,EAAGE,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAAC,EACA,SAAU,EAChB,EAEI,GAAI,CAEF,OADiB,MAAME,EAAM,IAAIN,EAAU,CAAE,OAAAK,CAAM,CAAE,GACrC,IACjB,OAAQE,EAAO,CACd,cAAQ,MAAM,iCAAkCA,CAAK,EAC/CA,CACP,CACL,CCpBA,MAAMC,EAAmB,SAAS,cAAc,UAAU,EAEpDC,EAAW,IAAIC,EAAe,aAAc,CAC9C,aAAc,MACd,aAAc,GAClB,CAAG,EAEI,SAASC,EAAcC,EAAQ,CAClC,MAAMC,EAASD,EAAO,IAAIE,GACjB;AAAA;AAAA,wCAE2BA,EAAM,aAAa,YAAYA,EAAM,IAAI;AAAA;AAAA;AAAA,WAGtEA,EAAM,YAAY;AAAA,UACnBA,EAAM,KAAK,MAAM,GAAG,EAAE,MAAM,EAAG,CAAC,EAAE,IAAIC,GAAOA,EAAI,KAAM,CAAA,EAAE,KAAK,IAAI,CAAC;AAAA;AAAA;AAAA;AAAA;AAAA,8BAK/CD,EAAM,KAAK;AAAA;AAAA;AAAA,8BAGXA,EAAM,KAAK;AAAA;AAAA;AAAA,iCAGRA,EAAM,QAAQ;AAAA;AAAA;AAAA,kCAGbA,EAAM,SAAS;AAAA;AAAA;AAAA;AAAA,OAK5C,EAAE,KAAK,EAAE,EAEVN,EAAiB,mBAAmB,YAAaK,CAAM,EACvDJ,EAAS,QAAO,CACjB,CAEI,SAASO,GAAe,CAC3BR,EAAiB,UAAY,EACjC,CAEO,SAASS,GAAa,CACzB,SAAS,KAAK,UAAU,IAAI,SAAS,CACtC,CAEM,SAASC,GAAa,CAC3B,SAAS,KAAK,UAAU,OAAO,SAAS,CACzC,CAEI,SAASC,GAAqB,CACjC,SAAS,cAAc,YAAY,EAAE,UAAU,OAAO,QAAQ,CAClE,CAEO,SAASC,GAAqB,CACjC,SAAS,cAAc,YAAY,EAAE,UAAU,IAAI,QAAQ,CAC/D,CCvDA,MAAMC,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAQD,EAAK,SAAS,aAAa,EACnCE,EAAc,SAAS,cAAc,YAAY,EACvD,IAAIC,EAAc,EACdC,EAAe,GAEnBJ,EAAK,iBAAiB,SAAUK,CAAY,EAC5CH,EAAY,iBAAiB,QAASI,CAAU,EAEhD,eAAeD,EAAaE,EAAO,CAC/BA,EAAM,eAAc,EAEpB,MAAMzB,EAAQmB,EAAM,MAAM,KAAI,EAE9B,GAAInB,IAAU,GAAI,CAChB0B,EAAS,QAAQ,CACf,QAAS,+BACT,SAAU,UAClB,CAAO,EACD,MACD,CAEDb,IACAI,IACAH,IACAO,EAAc,EACdC,EAAetB,EAEf,GAAI,CACF,MAAM2B,EAAO,MAAM5B,EAAiBC,EAAOqB,CAAW,EAEtD,GAAIM,EAAK,KAAK,SAAW,EAAG,CAC1BD,EAAS,MAAM,CACb,QAAS,2EACT,SAAU,UACpB,CAAS,EACD,MACD,CAEDlB,EAAcmB,EAAK,IAAI,EACvB,MAAMC,EAAa,KAAK,KAAKD,EAAK,UAAY,EAAE,EAC5CN,EAAcO,EAChBZ,IAEAC,GAEH,MAAe,CACdS,EAAS,MAAM,CACb,QAAS,2CACP,SAAU,UAEpB,CAAO,CACP,QAAc,CACRX,IACAI,EAAM,MAAQ,EACf,CACL,CAEA,eAAeK,GAAa,CAC1BV,IACAO,GAAe,EAEf,GAAI,CACF,MAAMM,EAAO,MAAM5B,EAAiBuB,EAAcD,CAAW,EAE7D,GAAIM,EAAK,KAAK,SAAW,EAAG,CAC1BD,EAAS,KAAK,CACZ,QAAS,0BACT,SAAU,UAClB,CAAO,EACDT,IACA,MACD,CAEDT,EAAcmB,EAAK,IAAI,EACnBA,EAAK,KAAK,OAAS,IACrBV,IAEF,MAAMW,EAAa,KAAK,KAAKD,EAAK,UAAY,EAAE,EAC5CN,GAAeO,IACjBX,IACAS,EAAS,KAAK,CACZ,QAAS,6DACT,SAAU,UAClB,CAAO,GAGH,WAAW,IAAM,CACf,MAAMG,EAAU,SAAS,cAAc,UAAU,EACjD,GAAIA,GAAWA,EAAQ,kBAAmB,CACxC,KAAM,CAAE,OAAQC,CAAU,EAAKD,EAAQ,kBAAkB,wBACzD,OAAO,SAAS,CACd,IAAKC,EAAa,EAClB,SAAU,QACpB,CAAS,CACF,CACF,EAAE,GAAG,CACP,MAAe,CACdJ,EAAS,MAAM,CACb,QAAS,2CACT,SAAU,UAChB,CAAK,CACL,QAAY,CACRX,GACD,CACH"}